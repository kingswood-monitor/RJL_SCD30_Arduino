#include <Arduino.h>
#include <unity.h>

#include <Wire.h>

#include <RJL_SCD30_Arduino.h>

SCD30 airSensor;

void setUp(void) {
}

void tearDown(void) {
}

void test_begin(void) {
    TEST_ASSERT_TRUE(airSensor.begin() == true);
}

void test_data_available() {
    TEST_ASSERT_TRUE(airSensor.dataAvailable() == true);
}

void test_get_CO2_returns_valid() {
    while (!airSensor.dataAvailable())
    {
        delay(10);
    }
    float co2 = airSensor.getCO2();
    TEST_ASSERT_TRUE(co2 > 300.0);
}

// END

void setup() {
    delay(2000);
    UNITY_BEGIN();

    RUN_TEST(test_begin);
    RUN_TEST(test_data_available);

    UNITY_END();
}

void loop() {
}